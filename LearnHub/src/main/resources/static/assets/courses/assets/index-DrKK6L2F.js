import"./modulepreload-polyfill-B5Qt9EMX.js";var st=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function it(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Q={exports:{}};(function(n,a){(function(l,m){n.exports=m()})(st,function(){return l.importState=function(r){var c=new l;return c.importState(r),c},l;function l(){return function(r){var c=0,u=0,d=0,v=1;r.length==0&&(r=[+new Date]);var f=m();c=f(" "),u=f(" "),d=f(" ");for(var t=0;t<r.length;t++)c-=f(r[t]),c<0&&(c+=1),u-=f(r[t]),u<0&&(u+=1),d-=f(r[t]),d<0&&(d+=1);f=null;var s=function(){var y=2091639*c+v*23283064365386963e-26;return c=u,u=d,d=y-(v=y|0)};return s.next=s,s.uint32=function(){return s()*4294967296},s.fract53=function(){return s()+(s()*2097152|0)*11102230246251565e-32},s.version="Alea 0.9",s.args=r,s.exportState=function(){return[c,u,d,v]},s.importState=function(y){c=+y[0]||0,u=+y[1]||0,d=+y[2]||0,v=+y[3]||0},s}(Array.prototype.slice.call(arguments))}function m(){var r=4022871197,c=function(u){u=u.toString();for(var d=0;d<u.length;d++){r+=u.charCodeAt(d);var v=.02519603282416938*r;r=v>>>0,v-=r,v*=r,r=v>>>0,v-=r,r+=v*4294967296}return(r>>>0)*23283064365386963e-26};return c.version="Mash 0.9",c}})})(Q);var at=Q.exports;const G=it(at),lt="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let $=(n=21)=>{let a="",l=crypto.getRandomValues(new Uint8Array(n));for(;n--;)a+=lt[l[n]&63];return a};function W(...n){return[...Array(Math.min(...n.map(a=>a.length)))].map((a,l)=>n.map(m=>m[l]))}function ut(n){return n.reduce((a,l)=>a+l,0)}function U(n){return 1/(1+Math.exp(-n))}function R(n=new G){let a,l;do a=n();while(a==0);do l=n();while(l==0);const m=Math.sqrt(-2*Math.log(a)),r=2*Math.PI*l;return[m*Math.cos(r),m*Math.sin(r)]}function B([n,...a]){return[n*n*(3-2*n),...a.map(l=>6*n*(1-n)*l)]}function x([n,...a],[l,...m],[r,...c]){return[r*l+(1-r)*n,...W(a,m,c).map(([u,d,v])=>v*(l-n)+r*d+(1-r)*u)]}function ct(n=$()){return(a,l)=>{const m=[1,0],r=[0,1];function c(t,s){const y=new G([n,t,s]),[b,g]=R(y),I=Math.hypot(b,g)/Math.SQRT2;return[(b*(a-t)+g*(l-s))/I,...W(m,r).map(([o,w])=>(b*o+g*w)/I)]}const u=Math.floor(a),d=Math.floor(l),v=B([a-u,...m]),f=B([l-d,...r]);return x(x(c(u,d),c(u+1,d),v),x(c(u,d+1),c(u+1,d+1),v),f)}}function dt(n=$()){return(a,l,m)=>{const r=[1,0,0],c=[0,1,0],u=[0,0,1];function d(g,I,o){const w=new G([n,g,I,o]),[P,L]=R(w),[S]=R(w),N=Math.hypot(P,L,S)*2/Math.sqrt(3);return[(P*(a-g)+L*(l-I)+S*(m-o))/N,...W(r,c,u).map(([h,e,i])=>(P*h+L*e+S*i)/N)]}const v=Math.floor(a),f=Math.floor(l),t=Math.floor(m),s=B([a-v,...r]),y=B([l-f,...c]),b=B([m-t,...u]);return x(x(x(d(v,f,t),d(v+1,f,t),s),x(d(v,f+1,t),d(v+1,f+1,t),s),y),x(x(d(v,f,t+1),d(v+1,f,t+1),s),x(d(v,f+1,t+1),d(v+1,f+1,t+1),s),y),b)}}function ft(n=$()){return(a,l,m,r)=>{const c=[1,0,0,0],u=[0,1,0,0],d=[0,0,1,0],v=[0,0,0,1];function f(P,L,S,N){const h=new G([n,P,L,S,N]),[e,i]=R(h),[p,E]=R(h),M=Math.hypot(e,i,p,E);return[(e*(a-P)+i*(l-L)+p*(m-S)+E*(r-N))/M,...W(c,u,d,v).map(([T,A,C,j])=>E*j/M)]}const t=Math.floor(a),s=Math.floor(l),y=Math.floor(m),b=Math.floor(r),g=B([a-t,...c]),I=B([l-s,...u]),o=B([m-y,...d]),w=B([r-b,...v]);return x(x(x(x(f(t,s,y,b),f(t+1,s,y,b),g),x(f(t,s+1,y,b),f(t+1,s+1,y,b),g),I),x(x(f(t,s,y+1,b),f(t+1,s,y+1,b),g),x(f(t,s+1,y+1,b),f(t+1,s+1,y+1,b),g),I),o),x(x(x(f(t,s,y,b+1),f(t+1,s,y,b+1),g),x(f(t,s+1,y,b+1),f(t+1,s+1,y,b+1),g),I),x(x(f(t,s,y+1,b+1),f(t+1,s,y+1,b+1),g),x(f(t,s+1,y+1,b+1),f(t+1,s+1,y+1,b+1),g),I),o),w)}}const z=1.25,V=1,X=2,O=32,k=400,D=32,F=new G;function H(n,a,l,m,r){const c=Math.atan2(r,m),u=Math.min(10,Math.hypot(m,r)/3);n.beginPath(),n.moveTo(a,l),n.lineTo(a+m,l+r),n.moveTo(a+m-u*Math.cos(c+Math.PI/6),l+r-u*Math.sin(c+Math.PI/6)),n.lineTo(a+m,l+r),n.lineTo(a+m-u*Math.cos(c-Math.PI/6),l+r-u*Math.sin(c-Math.PI/6)),n.stroke()}function Z(n){return U(8*n)}function _(n,a=1){return`rgba(${255*n} 0 ${255*(1-n)} / ${a})`}function Y(n){return W(...n).map(ut)}function mt(){const n=[...Array(V)].map(a=>ct());return(a,l)=>Y(n.map((m,r)=>{const c=X*z**r;return m(c*(a-.5),c*(l-.5)).map(u=>u/c)}))}function pt(){const n=[...Array(V)].map(a=>dt());return(a,l,m)=>Y(n.map((r,c)=>{const u=X*z**c;return r(u*(a-.5),u*(l-.5),u*(m-.5)).map(d=>d/u)}))}function ht(){const n=[...Array(V)].map(a=>ft());return(a,l,m,r)=>Y(n.map((c,u)=>{const d=X*z**u;return c(d*(a-.5),d*(l-.5),d*(m-.5),d*(r-.5)).map(v=>v/d)}))}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("2d"),a=document.getElementById("3d"),l=document.getElementById("4d"),m=document.getElementById("confirm"),r=document.getElementById("restart"),c=document.getElementById("prompt-dim"),u=document.getElementById("hint-2d"),d=document.getElementById("hint-3d"),v=document.getElementById("hint-4d"),f=document.getElementById("canvas"),t=f.getContext("2d"),s=[document.getElementById("axis-x"),document.getElementById("axis-y"),document.getElementById("axis-z"),document.getElementById("axis-w")],y=document.getElementById("status"),b=s[0].getBoundingClientRect().height;function g(h,e){return[O+k*h,O+k*e]}function I(h,e,i=.5){return[O+k*e,O+(o.state.dim==2?k:0)+h*(D+b)+i*D]}let o;function w(h){var e;(e=o==null?void 0:o.cleanup)==null||e.call(o),o={state:{dim:h,noise:h==2?mt():h==3?pt():ht(),history:[]},index:null,particles:[],turns:[],result:void 0,cleanup:void 0},c.textContent=h,u.style.display=h==2?"":"none",d.style.display=h==3?"":"none",v.style.display=h==4?"":"none",f.width=k+2*O,f.height=(h==2?k:0)+(D+b)*h+2*O;for(const[i,p]of s.entries()){const[E,M]=I(i,0,1);p.style.display=h>=i+1?"":"none",p.style.left=`${E}px`,p.style.top=`${M}px`,p.value=Math.random()}for(;y.firstChild;)y.lastChild.remove();for(let i=0;i<10;i++){const p=document.createElement("div");p.className="turn",y.append(p),o.turns.push(p)}m.textContent="측정",m.disabled=!1}function P(){function h(A,C,j,J,K,tt){for(let q=0;q<A;q++){const[et,nt]=R(F),[ot,rt]=R(F);o.particles.push({life:180,time:0,x:C,y:j,vx:et/256,vy:nt/256,ax:J+ot/2048,ay:K+rt/2048,gauge:tt})}}const e=o.state.history.length,i=s.map(A=>A.valueAsNumber),[p,...E]=o.state.noise(...i),M=Z(p);if(o.state.history.push({pos:i,value:p,deriv:E}),o.state.dim==2){const[A,C]=g(i[0],i[1]);h(16,A,C,-E[0]/48,-E[1]/48,M)}for(let A=0;A<o.state.dim;A++){const[C,j]=I(A,i[A]);h(8,C,j,-E[A]/48,0,M)}const T=o.turns[e];T.classList.add("taken"),T.style.color=_(M),T.addEventListener("mouseenter",()=>o.index=e),T.addEventListener("mouseleave",()=>o.index=null),e==9&&(m.textContent="확정")}function L(){m.disabled=!0,o.result={pos:s.map(h=>h.valueAsNumber),slices:[]},S();for(let h=0;h<o.state.dim;h++)s[h].addEventListener("input",S);o.cleanup=()=>{for(let h=0;h<o.state.dim;h++)s[h].removeEventListener("input",S)}}function S(){o.result.slices=[];for(let h=0;h<o.state.dim;h++){const e=[],i=s.map(M=>M.valueAsNumber);for(let M=0;M<k;M++)i[h]=M/k,e.push(o.state.noise(...i)[0]);const p=e.reduce((M,T)=>Math.min(M,T),1/0),E=e.reduce((M,T)=>Math.max(M,T),-1/0);o.result.slices.push({slice:e,min:p,max:E})}}function N(){const h=[];for(const e of o.particles)++e.time!=e.life&&(e.x+=e.vx,e.y+=e.vy,e.vx+=e.ax,e.vy+=e.ay,h.push(e));if(o.particles=h,t.clearRect(0,0,f.width,f.height),t.lineWidth=2,o.result!==void 0){if(o.state.dim==2){const e=s[0].valueAsNumber,i=s[1].valueAsNumber,p=t.createLinearGradient(...g(0,i),...g(1,i));for(const[M,T]of o.result.slices[0].slice.entries())p.addColorStop(M/k,_(Z(T)));t.strokeStyle=p,t.beginPath(),t.moveTo(...g(0,i)),t.lineTo(...g(1,i)),t.stroke();const E=t.createLinearGradient(...g(e,0),...g(e,1));for(const[M,T]of o.result.slices[1].slice.entries())E.addColorStop(M/k,_(Z(T)));t.strokeStyle=E,t.beginPath(),t.moveTo(...g(e,0)),t.lineTo(...g(e,1)),t.stroke()}for(const[e,{slice:i,min:p,max:E}]of o.result.slices.entries()){const M=t.createLinearGradient(...I(e,0,1),...I(e,0,0));for(let T=0;T<=D;T++){const A=T/D;M.addColorStop(A,_(Z(p+A*(E-p))))}t.strokeStyle=M,t.beginPath();for(const[T,A]of i.entries()){const C=I(e,T/k,1-(A-p)/(E-p));T==0?t.moveTo(...C):t.lineTo(...C)}t.stroke()}}if(t.strokeStyle="black",o.state.dim==2){const[e,i]=g(s[0].valueAsNumber,s[1].valueAsNumber);t.beginPath(),t.arc(e,i,8,0,2*Math.PI),t.stroke()}for(let e=0;e<o.state.dim;e++){const[i,p]=I(e,s[e].valueAsNumber);t.beginPath(),t.moveTo(i,p-4),t.lineTo(i,p+4),t.stroke()}if(o.state.history.length>0){const e=o.index??o.state.history.length-1,i=o.state.history[e];if(t.strokeStyle=_(U(8*i.value)),o.state.dim==2){const[p,E]=g(i.pos[0],i.pos[1]);H(t,p,E,-64*i.deriv[0],-64*i.deriv[1])}for(let p=0;p<o.state.dim;p++){const[E,M]=I(p,i.pos[p]);H(t,E,M,-64*i.deriv[p],0)}}if(o.result!==void 0){if(t.strokeStyle="black",o.state.dim==2){t.beginPath();const[e,i]=g(...o.result.pos);t.moveTo(e-5,i-5),t.lineTo(e+5,i+5),t.moveTo(e-5,i+5),t.lineTo(e+5,i-5),t.stroke()}for(let e=0;e<o.state.dim;e++){t.beginPath();const[i,p]=I(e,o.result.pos[e]);t.moveTo(i-5,p-5),t.lineTo(i+5,p+5),t.moveTo(i-5,p+5),t.lineTo(i+5,p-5),t.stroke()}}for(const e of o.particles)t.fillStyle=_(e.gauge,1-e.time/e.life),t.fillRect(Math.round(e.x)-1,Math.round(e.y)-1,3,3);requestAnimationFrame(N)}n.addEventListener("click",()=>w(2)),a.addEventListener("click",()=>w(3)),l.addEventListener("click",()=>w(4)),m.addEventListener("click",()=>o.state.history.length==10?L():P()),r.addEventListener("click",()=>w(o.state.dim)),w(2),N()});

import{V as g,E as M,k as y,W as L,c as P,d as f,A as x,D as _,B as D,l as A,i as C,C as S}from"./three.module-C7UIBytJ.js";const s=new y(0,0,0,"YXZ"),c=new g,b={type:"change"},z={type:"lock"},R={type:"unlock"},w=Math.PI/2;class F extends M{constructor(e,o){super(),this.camera=e,this.domElement=o,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.pointerSpeed=1,this._onMouseMove=W.bind(this),this._onPointerlockChange=q.bind(this),this._onPointerlockError=H.bind(this),this.connect()}connect(){this.domElement.ownerDocument.addEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.addEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.addEventListener("pointerlockerror",this._onPointerlockError)}disconnect(){this.domElement.ownerDocument.removeEventListener("mousemove",this._onMouseMove),this.domElement.ownerDocument.removeEventListener("pointerlockchange",this._onPointerlockChange),this.domElement.ownerDocument.removeEventListener("pointerlockerror",this._onPointerlockError)}dispose(){this.disconnect()}getObject(){return this.camera}getDirection(e){return e.set(0,0,-1).applyQuaternion(this.camera.quaternion)}moveForward(e){const o=this.camera;c.setFromMatrixColumn(o.matrix,0),c.crossVectors(o.up,c),o.position.addScaledVector(c,e)}moveRight(e){const o=this.camera;c.setFromMatrixColumn(o.matrix,0),o.position.addScaledVector(c,e)}lock(){this.domElement.requestPointerLock()}unlock(){this.domElement.ownerDocument.exitPointerLock()}}function W(n){if(this.isLocked===!1)return;const e=n.movementX||n.mozMovementX||n.webkitMovementX||0,o=n.movementY||n.mozMovementY||n.webkitMovementY||0,t=this.camera;s.setFromQuaternion(t.quaternion),s.y-=e*.002*this.pointerSpeed,s.x-=o*.002*this.pointerSpeed,s.x=Math.max(w-this.maxPolarAngle,Math.min(w-this.minPolarAngle,s.x)),t.quaternion.setFromEuler(s),this.dispatchEvent(b)}function q(){this.domElement.ownerDocument.pointerLockElement===this.domElement?(this.dispatchEvent(z),this.isLocked=!0):(this.dispatchEvent(R),this.isLocked=!1)}function H(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}class K{constructor(){this.keys=[],window.addEventListener("keydown",e=>{console.log(e.code+" 누름"),this.keys[e.code]=!0}),window.addEventListener("keyup",e=>{console.log(e.code+" 뗌"),delete this.keys[e.code]})}}function V(){const n=document.querySelector("#three-canvas"),e=new L({canvas:n,antialias:!0});e.setSize(window.innerWidth,window.innerHeight),e.setPixelRatio(window.devicePixelRatio>1?2:1);const o=new P,t=new f(75,window.innerWidth/window.innerHeight,.1,1e3);t.position.y=1.5,t.position.z=4,o.add(t);const k=new x("white",.5);o.add(k);const d=new _("white",1);d.position.x=1,d.position.z=2,o.add(d);const i=new F(t,e.domElement);i.domElement.addEventListener("click",()=>{i.lock()}),i.addEventListener("lock",()=>{console.log("lock!")}),i.addEventListener("unlock",()=>{console.log("unlock!")});const r=new K;function u(){(r.keys.KeyW||r.keys.ArrowUp)&&i.moveForward(.02),(r.keys.KeyS||r.keys.ArrowDown)&&i.moveForward(-.02),(r.keys.KeyA||r.keys.ArrowLeft)&&i.moveRight(-.02),(r.keys.KeyD||r.keys.ArrowRight)&&i.moveRight(.02)}const v=new D(1,1,1);let a,m;for(let h=0;h<20;h++)m=new A({color:`rgb(
				${50+Math.floor(Math.random()*205)},
				${50+Math.floor(Math.random()*205)},
				${50+Math.floor(Math.random()*205)}
			)`}),a=new C(v,m),a.position.x=(Math.random()-.5)*5,a.position.y=(Math.random()-.5)*5,a.position.z=(Math.random()-.5)*5,o.add(a);const E=new S;function l(){E.getDelta(),u(),e.render(o,t),e.setAnimationLoop(l)}function p(){t.aspect=window.innerWidth/window.innerHeight,t.updateProjectionMatrix(),e.setSize(window.innerWidth,window.innerHeight),e.render(o,t)}window.addEventListener("resize",p),l()}V();

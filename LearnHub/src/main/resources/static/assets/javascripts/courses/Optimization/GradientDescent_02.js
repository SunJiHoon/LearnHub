import{c as L,a as q}from"../assets/_commonjsHelpers-C4iS2aBk.js";import{d as P}from"../assets/draw-8NsNGzdc.js";var F={exports:{}};(function(n,e){(function(r,l){n.exports=l()})(L,function(){return r.importState=function(t){var o=new r;return o.importState(t),o},r;function r(){return function(t){var o=0,u=0,i=0,c=1;t.length==0&&(t=[+new Date]);var m=l();o=m(" "),u=m(" "),i=m(" ");for(var p=0;p<t.length;p++)o-=m(t[p]),o<0&&(o+=1),u-=m(t[p]),u<0&&(u+=1),i-=m(t[p]),i<0&&(i+=1);m=null;var a=function(){var s=2091639*o+c*23283064365386963e-26;return o=u,u=i,i=s-(c=s|0)};return a.next=a,a.uint32=function(){return a()*4294967296},a.fract53=function(){return a()+(a()*2097152|0)*11102230246251565e-32},a.version="Alea 0.9",a.args=t,a.exportState=function(){return[o,u,i,c]},a.importState=function(s){o=+s[0]||0,u=+s[1]||0,i=+s[2]||0,c=+s[3]||0},a}(Array.prototype.slice.call(arguments))}function l(){var t=4022871197,o=function(u){u=u.toString();for(var i=0;i<u.length;i++){t+=u.charCodeAt(i);var c=.02519603282416938*t;t=c>>>0,c-=t,c*=t,t=c>>>0,c-=t,t+=c*4294967296}return(t>>>0)*23283064365386963e-26};return o.version="Mash 0.9",o}})})(F);function X(n){return 1/(1+Math.exp(-n))}function k(n){return n.reduce((e,r)=>e+r,0)}function C(n){return n.reduce((e,r)=>e*r,1)}function g(n){return e=>e?0:n}function I(n,e){return r=>r?(r==null?void 0:r[n])??0:e}function v(n,e){return r=>n*(r?e(r):e())}function h(...n){return e=>k(n.map(r=>e?r(e):r()))}function w(...n){return e=>e?k(n.map((r,l)=>C(n.map((t,o)=>l==o?t(e):t())))):C(n.map(r=>r()))}function y(){let n,e;do n=Math.random();while(n==0);do e=Math.random();while(e==0);return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*e)}var D={exports:{}};(function(n,e){(function(r,l){n.exports=l()})(L,function(){return r.importState=function(t){var o=new r;return o.importState(t),o},r;function r(){return function(t){var o=0,u=0,i=0,c=1;t.length==0&&(t=[+new Date]);var m=l();o=m(" "),u=m(" "),i=m(" ");for(var p=0;p<t.length;p++)o-=m(t[p]),o<0&&(o+=1),u-=m(t[p]),u<0&&(u+=1),i-=m(t[p]),i<0&&(i+=1);m=null;var a=function(){var s=2091639*o+c*23283064365386963e-26;return o=u,u=i,i=s-(c=s|0)};return a.next=a,a.uint32=function(){return a()*4294967296},a.fract53=function(){return a()+(a()*2097152|0)*11102230246251565e-32},a.version="Alea 0.9",a.args=t,a.exportState=function(){return[o,u,i,c]},a.importState=function(s){o=+s[0]||0,u=+s[1]||0,i=+s[2]||0,c=+s[3]||0},a}(Array.prototype.slice.call(arguments))}function l(){var t=4022871197,o=function(u){u=u.toString();for(var i=0;i<u.length;i++){t+=u.charCodeAt(i);var c=.02519603282416938*t;t=c>>>0,c-=t,c*=t,t=c>>>0,c-=t,t+=c*4294967296}return(t>>>0)*23283064365386963e-26};return o.version="Mash 0.9",o}})})(D);var Y=D.exports;const j=q(Y),G="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let O=(n=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(n));for(;n--;)e+=G[r[n]&63];return e};function z(n){return w(n,n,h(g(3),v(-2,n)))}function M(n,e,r){return h(w(r,e),w(h(g(1),v(-1,r)),n))}function N(){const n=O();return(e,r)=>{const l=Math.floor(e()),t=Math.floor(r()),o=z(h(e,g(-l))),u=z(h(r,g(-t)));function i(c,m){const p=new j([n,c,m]),a=2*Math.PI*p();return h(v(Math.cos(a),h(e,g(-c))),v(Math.sin(a),h(r,g(-m))))}return M(M(i(l,t),i(l+1,t),o),M(i(l,t+1),i(l+1,t+1),o),u)}}function T(n=2,e=1.5){const r=[...Array(n)].map((l,t)=>{const o=N();return(u,i)=>{const c=e**t;return v(1/c,o(v(c,u),v(c,i)))}});return(l,t)=>h(...r.map(o=>o(l,t)))}const U=1;function V(n,e){const r=W();return{noise:r,map:Z(n,e,r),attempts:[],x:Math.random(),y:Math.random(),result:null,particles:[]}}function W(){function n(r){return v(2*U,h(r,g(-.5)))}const e=T();return(r,l)=>{const t=e(n(I("x",r)),n(I("y",l)));return(o,u)=>o!==void 0?t({x:o,y:u}):t()}}function Z(n,e,r){const l=document.createElement("canvas"),t=l.getContext("2d"),o=t.createImageData(n,e);l.width=n,l.height=e;for(let u=0;u<e;u++)for(let i=0;i<n;i++){const c=Math.floor(256*A(r(i/n,u/e)()));o.data[4*(n*u+i)]=c,o.data[4*(n*u+i)+1]=0,o.data[4*(n*u+i)+2]=255-c,o.data[4*(n*u+i)+3]=255}return t.putImageData(o,0,0),l}function A(n){return X(5*n)}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("mana-descent"),e=n.getContext("2d"),r=document.getElementById("confirm"),l=document.getElementById("restart");let t=null,o=!1,u=null;function i(a,s){t.result||(t.x=a/n.width,t.y=s/n.height,p())}function c(){if(t.result)return;if(t.attempts.length==10){t.result=[t.x,t.y,t.noise(t.x,t.y)()];return}const a=t.noise(t.x,t.y),s=a(),d=a(1,0),f=a(0,1);t.attempts.push([t.x,t.y,s,d,f]);for(let x=0;x<16;x++)t.particles.push({life:3+y()/3,time:0,x:t.x,y:t.y,vy:y()/400,vx:y()/400,ax:(-d+y()*2/3)/200,ay:(-f+y()*2/3)/200,z:s});r.textContent=t.attempts.length==10?"여기로 결정":`${t.attempts.length+1}개째 터뜨리기`,p()}function m(){t=V(n.width,n.height),r.textContent="1개째 터뜨리기",p()}function p(){o=!0}requestAnimationFrame(function a(s){const d=u===null?0:(s-u)/1e3;if(u=s,o){o=t.particles.length!=0,e.clearRect(0,0,n.width,n.height),t.result&&(e.globalAlpha=.3,e.drawImage(t.map,0,0),e.globalAlpha=1),t.particles=t.particles.filter(f=>(f.time+=d)<f.life);for(const f of t.particles){const x=Math.floor(256*A(f.z));f.x+=d*(f.vx+=d*f.ax),f.y+=d*(f.vy+=d*f.ay),e.fillStyle=`rgba(${x}, 0, ${255-x}, ${1-f.time/f.life})`,e.fillRect(Math.round(n.width*f.x)-2,Math.round(n.height*f.y)-2,4,4)}e.lineWidth=2;for(let f=0;f<t.attempts.length;f++){const[x,R,$,B,_]=t.attempts[f],b=Math.floor(256*A($)),S=n.width*x,E=n.height*R;e.globalAlpha=t.result||f==t.attempts.length-1?1:.5,e.fillStyle=e.strokeStyle=`rgba(${b}, 0, ${255-b})`,P(e,S,E,S-5*B,E-5*_,10)}e.globalAlpha=1,e.strokeStyle="black",e.beginPath(),e.arc(n.width*t.x,n.height*t.y,8,0,2*Math.PI),e.stroke()}requestAnimationFrame(a)}),n.addEventListener("mousedown",a=>{if(!(a.buttons&1))return;const{left:s,top:d}=a.target.getBoundingClientRect();i(a.clientX-s,a.clientY-d)}),n.addEventListener("mousemove",a=>{if(!(a.buttons&1))return;const{left:s,top:d}=a.target.getBoundingClientRect();i(a.clientX-s,a.clientY-d)}),r.addEventListener("click",c),l.addEventListener("click",m),setTimeout(m,0)});

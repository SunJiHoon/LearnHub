import{c as q,a as P}from"../assets/_commonjsHelpers-C4iS2aBk.js";import{d as F}from"../assets/draw-8NsNGzdc.js";function k(n){return n.reduce((e,r)=>e+r,0)}function I(n){return n.reduce((e,r)=>e*r,1)}function v(n){return e=>e?0:n}function z(n,e){return r=>r?(r==null?void 0:r[n])??0:e}function g(n,e){return r=>n*(r?e(r):e())}function h(...n){return e=>k(n.map(r=>e?r(e):r()))}function w(...n){return e=>e?k(n.map((r,c)=>I(n.map((t,o)=>c==o?t(e):t())))):I(n.map(r=>r()))}function x(){let n,e;do n=Math.random();while(n==0);do e=Math.random();while(e==0);return Math.sqrt(-2*Math.log(n))*Math.cos(2*Math.PI*e)}function X(n){return 1/(1+Math.exp(-n))}var R={exports:{}};(function(n,e){(function(r,c){n.exports=c()})(q,function(){return r.importState=function(t){var o=new r;return o.importState(t),o},r;function r(){return function(t){var o=0,u=0,i=0,l=1;t.length==0&&(t=[+new Date]);var m=c();o=m(" "),u=m(" "),i=m(" ");for(var p=0;p<t.length;p++)o-=m(t[p]),o<0&&(o+=1),u-=m(t[p]),u<0&&(u+=1),i-=m(t[p]),i<0&&(i+=1);m=null;var a=function(){var f=2091639*o+l*23283064365386963e-26;return o=u,u=i,i=f-(l=f|0)};return a.next=a,a.uint32=function(){return a()*4294967296},a.fract53=function(){return a()+(a()*2097152|0)*11102230246251565e-32},a.version="Alea 0.9",a.args=t,a.exportState=function(){return[o,u,i,l]},a.importState=function(f){o=+f[0]||0,u=+f[1]||0,i=+f[2]||0,l=+f[3]||0},a}(Array.prototype.slice.call(arguments))}function c(){var t=4022871197,o=function(u){u=u.toString();for(var i=0;i<u.length;i++){t+=u.charCodeAt(i);var l=.02519603282416938*t;t=l>>>0,l-=t,l*=t,t=l>>>0,l-=t,t+=l*4294967296}return(t>>>0)*23283064365386963e-26};return o.version="Mash 0.9",o}})})(R);var Y=R.exports;const j=P(Y),G="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let O=(n=21)=>{let e="",r=crypto.getRandomValues(new Uint8Array(n));for(;n--;)e+=G[r[n]&63];return e};function L(n){return w(n,n,h(v(3),g(-2,n)))}function M(n,e,r){return h(w(r,e),w(h(v(1),g(-1,r)),n))}function N(){const n=O();return(e,r)=>{const c=Math.floor(e()),t=Math.floor(r()),o=L(h(e,v(-c))),u=L(h(r,v(-t)));function i(l,m){const p=new j([n,l,m]),a=2*Math.PI*p();return h(g(Math.cos(a),h(e,v(-l))),g(Math.sin(a),h(r,v(-m))))}return M(M(i(c,t),i(c+1,t),o),M(i(c,t+1),i(c+1,t+1),o),u)}}function T(n=2,e=1.5){const r=[...Array(n)].map((c,t)=>{const o=N();return(u,i)=>{const l=e**t;return g(1/l,o(g(l,u),g(l,i)))}});return(c,t)=>h(...r.map(o=>o(c,t)))}const b=1;function U(n,e){const r=V();return{noise:r,map:W(n,e,r),attempts:[],x:Math.random(),y:Math.random(),result:null,particles:[]}}function V(){function n(r){return g(2*b,h(r,v(-.5)))}const e=T();return(r,c)=>{const t=e(n(z("x",r)),n(z("y",c)));return(o,u)=>o!==void 0?t({x:o,y:u}):t()}}function W(n,e,r){const c=document.createElement("canvas"),t=c.getContext("2d"),o=t.createImageData(n,e);c.width=n,c.height=e;for(let u=0;u<e;u++)for(let i=0;i<n;i++){const l=Math.floor(256*A(r(i/n,u/e)()));o.data[4*(n*u+i)]=l,o.data[4*(n*u+i)+1]=0,o.data[4*(n*u+i)+2]=255-l,o.data[4*(n*u+i)+3]=255}return t.putImageData(o,0,0),c}function A(n){return X(5*n)}document.addEventListener("DOMContentLoaded",()=>{const n=document.getElementById("mana-descent"),e=n.getContext("2d"),r=document.getElementById("confirm"),c=document.getElementById("restart");let t=null,o=!1,u=null;function i(a,f){t.result||(t.x=a/n.width,t.y=f/n.height,p())}function l(){if(t.result)return;if(t.attempts.length==10){t.result=[t.x,t.y,t.noise(t.x,t.y)()];return}const a=t.noise(t.x,t.y),f=a(),d=a(1,0),s=a(0,1);t.attempts.push([t.x,t.y,f,d,s]);for(let y=0;y<16;y++)t.particles.push({life:3+x()/3,time:0,x:t.x,y:t.y,vy:x()/400,vx:x()/400,ax:(-d+x()*2/3)/200,ay:(-s+x()*2/3)/200,z:f});r.textContent=t.attempts.length==10?"여기로 결정":`${t.attempts.length+1}개째 터뜨리기`,p()}function m(){t=U(n.width,n.height),r.textContent="1개째 터뜨리기",p()}function p(){o=!0}requestAnimationFrame(function a(f){const d=u===null?0:(f-u)/1e3;if(u=f,o){o=t.particles.length!=0,e.clearRect(0,0,n.width,n.height),t.result&&(e.globalAlpha=.3,e.drawImage(t.map,0,0),e.globalAlpha=1),t.particles=t.particles.filter(s=>(s.time+=d)<s.life);for(const s of t.particles){const y=Math.floor(256*A(s.z));s.x+=d*(s.vx+=d*s.ax),s.y+=d*(s.vy+=d*s.ay),e.fillStyle=`rgba(${y}, 0, ${255-y}, ${1-s.time/s.life})`,e.fillRect(Math.round(n.width*s.x)-2,Math.round(n.height*s.y)-2,4,4)}e.lineWidth=2;for(let s=0;s<t.attempts.length;s++){const[y,B,D,_,$]=t.attempts[s],E=Math.floor(256*A(D)),C=n.width*y,S=n.height*B;e.globalAlpha=t.result||s==t.attempts.length-1?1:.5,e.fillStyle=e.strokeStyle=`rgba(${E}, 0, ${255-E})`,F(e,C,S,C-10/b*_,S-10/b*$,10)}e.globalAlpha=1,e.strokeStyle="black",e.beginPath(),e.arc(n.width*t.x,n.height*t.y,8,0,2*Math.PI),e.stroke()}requestAnimationFrame(a)}),n.addEventListener("mousedown",a=>{if(!(a.buttons&1))return;const{left:f,top:d}=a.target.getBoundingClientRect();i(a.clientX-f,a.clientY-d)}),n.addEventListener("mousemove",a=>{if(!(a.buttons&1))return;const{left:f,top:d}=a.target.getBoundingClientRect();i(a.clientX-f,a.clientY-d)}),r.addEventListener("click",l),c.addEventListener("click",m),setTimeout(m,0)});
